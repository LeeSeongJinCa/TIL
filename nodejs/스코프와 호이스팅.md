# 스코프와 호이스팅
---

자바스크립트의 중요한 개념인 스코프와 호이스팅에 대해 알아봅니다.

### 유효 범위(Scope)란?
---

scope의 사전적 의미는 __범위__ 입니다. 변수가 어디서부터 어디까지 유효하는지 알기위해 스코프를 알아야 합니다.
스코프는 __전역(global)__ 과 __지역(local)__ 스코프가 있습니다.

__전역 스코프__ 는 함수 안에 포함되지 않은 어디서든 접근할 수 있고, __지역 스코프__ 는  함수 내에 정의된 것으로 정의된 함수 안에서만 참조할 수 있습니다.
여기서 문제는 일반적인 대부분의 언어들은 블록 레벨 스코프(block level scope)이지만, 자바스크립트는 함수 레벨 스코프(function level scope)입니다. 따라서 변수의 유효범위가 함수 단위입니다. 이는 if문과 for문 같은 블록 레벨 스코프 안에 선언된 변수들이 스코프 밖에서 참조할 수 있음을 의미합니다.

### 전역 스코프와 지역 스코프
---

``` javascript
var globalScope = "global";
function func() {
    var localScope = "local";
    console.log(globalScope);
    > global
    console.log(localScope);
    > local
}
console.log(localScope);
> "Error!"
```

### 스코프 체인
---

스코프 체인은 __함수 내부에 정의된 변수는 함수 외부에서 접근할 수 없다__ 는 것을 말합니다.
따라서 함수 밖에서는 내부에 변숙 없는 것처럼 보입니다.

또, 내부 함수에서 변수를 참조할 때 내부에 선언되지 않았다면 외부 함수 스코프에서 찾고 거기에도 없다면 더 상위 함수에서 찾습니다. 최종적으로 전역 스코프에서도 찾는 변수가 없으면 not defined 에러를 출력합니다. 이렇게 계속해서 체인처럼 꼬리에 꼬리를 물면서 상위 스코프를 참조하는 것을 __스코프 체인__ 이라고 말합니다.

### 정적 범위(Lexical scope)
---

렉시컬 스코프란 함수를 어디서 호출했는지가 아니라 __어떤 스코프에서 호출__ 했는지에 따라 __결정된다__ 는 것입니다.

__"어디서 호출했는지가 중요한게 아니라 처음 선언했을 때 어떤 스코프에 있는지"__ 가 중요합니다.
즉, 스코프란 코드가 실행되면서 바뀌는 것이 아닌 처음 작성한 그 스코프로 결정된다는 것입니다.

### 호이스팅(hoisting)
---

hoisting의 사전적 의미는 끌어올리기 라는 뜻입니다. 말 그대로 함수 안에서 변수를 선언할 때 변수를 함수의 시작 위치로 끌어올리는 것을 말합니다. 단, 선언 부분만 위로 끌어올리고 대입 부분은 위치에 그래도 남아 있습니다.
``` javascript
function fun() {
    console.log(a);
    > undefined
    var a = 1;
    console.log(a);
    > 1
}
```
위 코드는 아래와 같은 코드입니다.
``` javascript
function fun() {
    var a;
    console.log(a);
    > undefined
    a = 1;
    console.log(a);
    > 1
}
```

함수 호이스팅도 똑같습니다.
``` javascript
fun();
function fun() {
    console.log("출력");
    > 출력
}
```
함수 선언식도 위로 끌어올려지기 때문입니다. 하지만 함수 표현식에는 호이스팅이 적용되지 않습니다.
``` javascript
fun();
> fun is not a function
let fun = () => {
    console.log("출력");
}
```
왜 일까요? 바로 아래와 같은 코드이기 때문입니다.

``` javascript
let fun;
fun();
fun = () => {
    console.log("출력");
}
```
따라서 아직 fun 변수는 선언만 되었지 함수로 지정되지 않았기 때문입니다.